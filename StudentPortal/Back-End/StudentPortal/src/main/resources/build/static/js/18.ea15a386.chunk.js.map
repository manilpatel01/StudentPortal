{"version":3,"sources":["Components/AdminPanel/DocumentModel.js","Components/AdminPanel/FeeRefundModel.js","Components/AdminPanel/ApproveFeeRefund.js"],"names":["DocumentModel","src","className","id","tabIndex","role","type","data-dismiss","aria-label","aria-hidden","alt","FeeRefundModel","data","console","log","s","class","tabindex","scope","toLowerCase","charAt","toUpperCase","slice","amount","transaction_no","bank_name","bank_ifsc","bank_branch","bank_ac_no","ApproveFeeRefund","useState","refundRequests","setrefundRequests","FeeDetails","setFeeDetails","feeReceipt","setfeeReceipt","approveReject","refund_id","enrollment","status","comment","document","getElementById","disabled","formData","FormData","set","Axios","post","APIENDPOINTS","approveFeeRefund","then","res","filter","d","catch","e","useEffect","a","get","err","i","length","map","request","first_name","middle_name","last_name","semester","data-toggle","data-target","onClick","dataObject","fees_type","fee_document_url","onSubmit","preventDefault","target","value","name","placeholder","required","Loading"],"mappings":"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","file":"static/js/18.ea15a386.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction DocumentModel({ src }) {\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      id=\"openDocumentModal\"\r\n      tabIndex=\"-1\"\r\n      role=\"dialog\"\r\n    >\r\n      <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h4 className=\"modal-title\" id=\"openDocumentModal_title\">\r\n              Document\r\n            </h4>\r\n            <button\r\n              type=\"button\"\r\n              className=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"modal-body\">\r\n            <img\r\n              className=\"img-fluid img-thumbnail\"\r\n              src={src}\r\n              id=\"fee_Receipt\"\r\n              alt=\"fee receipt\"\r\n            />\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-danger btn-lg\"\r\n              data-dismiss=\"modal\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DocumentModel;\r\n","import React from 'react'\r\n\r\nexport default function FeeRefundModel({data}) {\r\n    console.log(data)\r\n    const capitalize = (s) => {\r\n        if (typeof s !== \"string\") return \"\";\r\n        return s.charAt(0).toUpperCase() + s.slice(1);\r\n      };\r\n\r\n    return (\r\n        <div class=\"modal fade\" id=\"openFeeRefundModal\" tabindex=\"-1\" role=\"dialog\">\r\n      <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h4 class=\"modal-title\" id=\"change_photo_title\">\r\n              Fee Receipt\r\n            </h4>\r\n            <button\r\n              type=\"button\"\r\n              class=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"modal-body\">\r\n           \r\n          <table class=\"table table-bordered\">\r\n \r\n  <thead>\r\n   \r\n  </thead>\r\n \r\n   {data && <tbody><tr>\r\n    <th scope=\"row\">Fee Type </th>\r\n    <td>{capitalize(data.type.toLowerCase())} Fee</td>\r\n   </tr>\r\n   <tr>\r\n    <th scope=\"row\">Amount</th>\r\n    <td>{data.amount} </td>\r\n   </tr>\r\n\r\n   <tr>\r\n    <th scope=\"row\">Transection Id </th>\r\n    <td>{data.transaction_no} </td>\r\n   </tr>\r\n   <tr>\r\n    <th scope=\"row\">Bank Name </th>\r\n    <td>{data.bank_name} </td>\r\n   </tr>\r\n   <tr>\r\n    <th scope=\"row\">Bank Ifsc Code </th>\r\n    <td>{data.bank_ifsc} </td>\r\n   </tr>\r\n   <tr>\r\n    <th scope=\"row\">Bank Branch </th>\r\n    <td>{data.bank_branch} </td>\r\n   </tr>\r\n\r\n   <tr>\r\n    <th scope=\"row\">Bank Account Number </th>\r\n    <td>{data.bank_ac_no} </td>\r\n   </tr></tbody> }\r\n   \r\n   \r\n   \r\n\r\n\r\n</table>\r\n\r\n\r\n\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger btn-lg\"\r\n              data-dismiss=\"modal\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Loading from \"../../Util/Loading\";\r\nimport DocumentModel from \"./DocumentModel\";\r\nimport FeeRefundModel from \"./FeeRefundModel\";\r\nimport { APIENDPOINTS } from \"../../redux/api_endpoint\";\r\n\r\nfunction ApproveFeeRefund() {\r\n  const [refundRequests, setrefundRequests] = useState();\r\n  const [FeeDetails, setFeeDetails] = useState();\r\n  const [feeReceipt, setfeeReceipt] = useState(\"\");\r\n\r\n  //\"/upload/\"+req[\"fee_document_url\"]\r\n\r\n  const approveReject = (refund_id, enrollment, status, comment) => {\r\n    document.getElementById(`reject-${refund_id}`).disabled = \"true\";\r\n    document.getElementById(`approve-${refund_id}`).disabled = \"true\";\r\n\r\n    var formData = new FormData();\r\n    formData.set(\"enrollment\", enrollment);\r\n    formData.set(\"status\", status);\r\n    if (comment !== null) formData.set(\"comment\", comment);\r\n\r\n    Axios.post(APIENDPOINTS.approveFeeRefund(), formData)\r\n      .then((res) =>\r\n        setrefundRequests(\r\n          refundRequests.filter((d) => d.refund_id !== refund_id)\r\n        )\r\n      )\r\n      .catch((e) => {\r\n        console.log(e);\r\n        document.getElementById(`reject-${refund_id}`).disabled = false;\r\n        document.getElementById(`approve-${refund_id}`).disabled = false;\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      await Axios.get(\"/admin/pendingFeeRefund\")\r\n        .then((res) => {\r\n          setrefundRequests(res.data);\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    })();\r\n  }, []);\r\n  let i = 1;\r\n  return (\r\n    <div class=\"container-fluid mt-4\">\r\n      <div class=\"row\">\r\n        <div class=\"col\">\r\n          {refundRequests ? (\r\n            refundRequests.length === 0 ? (\r\n              <h1 className=\"text-center\">\r\n                No Fee Refund Requests Found For Approval!\r\n              </h1>\r\n            ) : (\r\n              refundRequests && (\r\n                <div class=\"table-responsive\">\r\n                  <table class=\"table table-bordered table-hover\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Sr No.</th>\r\n                        <th>Enrollment</th>\r\n                        <th>Name</th>\r\n                        <th>Semester</th>\r\n                        <th>Fee Details</th>\r\n                        <th>Fee Receipt</th>\r\n                        <th>Approve</th>\r\n                        <th>Reject</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {refundRequests.map((request) => (\r\n                        <tr>\r\n                          <td>{i++}</td>\r\n                          <td>{request.enrollment}</td>\r\n                          <td>\r\n                            {request.first_name} {request.middle_name}{\" \"}\r\n                            {request.last_name}{\" \"}\r\n                          </td>\r\n                          <td>{request.semester}</td>\r\n                          <td>\r\n                            <button\r\n                              type=\"button\"\r\n                              class=\"btn btn-outline-primary btn-sm\"\r\n                              id={i}\r\n                              data-toggle=\"modal\"\r\n                              data-target=\"#openFeeRefundModal\"\r\n                              onClick={(e) =>{ \r\n                                let dataObject ={};\r\n                                dataObject.type =request.fees_type;\r\n                                dataObject.transaction_no=request.transaction_no;\r\n                                dataObject.bank_ac_no = request.bank_ac_no;\r\n                                dataObject.bank_branch = request.bank_branch;\r\n                                dataObject.bank_ifsc = request.bank_ifsc;\r\n                                dataObject.bank_name = request.bank_name;\r\n                                dataObject.amount = request.amount;\r\n\r\n\r\n                                setFeeDetails(dataObject)}\r\n                              \r\n                              }\r\n                            >\r\n                              fee Details\r\n                            </button>\r\n                          </td>\r\n\r\n                          <td>\r\n                            <button\r\n                              type=\"button\"\r\n                              class=\"btn btn-outline-primary btn-sm\"\r\n                              id={i}\r\n                              data-toggle=\"modal\"\r\n                              data-target=\"#openDocumentModal\"\r\n                              onClick={(e) =>\r\n                                setfeeReceipt(\r\n                                  \"/upload/\" + request.fee_document_url\r\n                                )\r\n                              }\r\n                            >\r\n                              fee Receipt\r\n                            </button>\r\n                          </td>\r\n                          <td>\r\n                            <form\r\n                              onSubmit={(e) => {\r\n                                e.preventDefault();\r\n\r\n                                approveReject(\r\n                                  request.refund_id,\r\n                                  request.enrollment,\r\n                                  1,\r\n                                  null\r\n                                );\r\n                              }}\r\n                            >\r\n                              {\r\n                                <button\r\n                                  type=\"submit\"\r\n                                  class=\"btn btn-outline-success btn-sm\"\r\n                                  id={`approve-${request.refund_id}`}\r\n                                >\r\n                                  Aprrove\r\n                                </button>\r\n                              }\r\n                            </form>\r\n                          </td>\r\n                          <td>\r\n                            <form\r\n                              onSubmit={(e) => {\r\n                                e.preventDefault();\r\n                                approveReject(\r\n                                  request.refund_id,\r\n                                  request.enrollment,\r\n                                  2,\r\n                                  e.target.comment.value\r\n                                );\r\n                              }}\r\n                            >\r\n                              <div class=\"input-group\">\r\n                                <input\r\n                                  type=\"text\"\r\n                                  class=\"form-control\"\r\n                                  name=\"comment\"\r\n                                  placeholder=\"Enter Comment on reject...\"\r\n                                  required\r\n                                />\r\n                                <div class=\"input-group-append\">\r\n                                  <button\r\n                                    type=\"submit\"\r\n                                    id={`reject-${request.refund_id}`}\r\n                                    class=\"btn btn-outline-danger btn-sm\"\r\n                                  >\r\n                                    Reject\r\n                                  </button>\r\n                                </div>\r\n                              </div>\r\n                            </form>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )\r\n            )\r\n          ) : (\r\n            <Loading />\r\n          )}\r\n        </div>\r\n      </div>\r\n      <DocumentModel src={feeReceipt} />\r\n      <FeeRefundModel data={FeeDetails}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ApproveFeeRefund;\r\n"],"sourceRoot":""}